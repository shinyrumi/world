<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµ­ê°€ ë¶€ì„œ ì„ íƒ ê°€ì´ë“œ (ì‹¤ì‹œê°„ ì°¸ì—¬)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Extended Warm Neutrals with Professional Blue and Green Accents -->
    <!-- Application Structure Plan: A dynamic, single-page application for students to sign up for government departments. The layout uses a responsive grid of interactive cards. Each card displays department info and now includes a real-time list of members and a sign-up form. This structure facilitates a collaborative and transparent selection process, allowing students to see department popularity in real-time. -->
    <!-- Visualization & Content Choices: Report Info (Department roles) -> Goal (Enable collaborative sign-up) -> Viz/Presentation (Interactive cards with input forms and real-time member lists) -> Interaction (Enter name, click to join, see live updates) -> Justification (This interactive approach is more engaging and functional for a group activity than a static guide, promoting self-organization.) -> Library/Method (Tailwind CSS for styling, Firebase/Firestore for real-time database, Vanilla JS for logic). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f9fafb;
            color: #1f2937;
        }
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        .department-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        .department-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .card-content {
            flex-grow: 1;
        }
        .member-list {
            min-height: 50px;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center my-8 md:my-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 tracking-tight">ìš°ë¦¬ êµ­ê°€ì˜ ë¯¸ë˜ë¥¼ ì„¤ê³„í•  ë¶€ì„œë¥¼ ì„ íƒí•˜ì„¸ìš”</h1>
            <p class="text-lg text-gray-500 mt-4 max-w-3xl mx-auto">ê° ë¶€ì„œëŠ” 'ë©‹ì§„ ì‹ ì„¸ê³„'ì˜ ë¬¸ì œì ì„ í•´ê²°í•˜ê³ , ìš°ë¦¬ì˜ ê°€ì¹˜ë¥¼ ì‹¤í˜„í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.<br>ì´ë¦„ì„ ì…ë ¥í•˜ê³  ì›í•˜ëŠ” ë¶€ì„œì— ê°€ì…í•˜ì—¬ êµ­ê°€ ê±´ì„¤ì— ì°¸ì—¬í•´ ë³´ì„¸ìš”!</p>
        </header>

        <main>
            <div id="department-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Department cards will be dynamically inserted here -->
            </div>
        </main>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, doc, onSnapshot, updateDoc, arrayUnion, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const departments = [
            { id: 'admin_legislative', name: 'í–‰ì •ì…ë²•ë¶€', icon: 'ğŸ›ï¸', color: 'blue-500', category: 'í•µì‹¬', description: 'êµ­ê°€ì˜ í° ë°©í–¥ì„ ê²°ì •í•˜ê³ , í—Œë²•ê³¼ ë²•ë¥ ì„ ë§Œë“­ë‹ˆë‹¤.', activity: 'ì •ë¶€ í˜•íƒœ ê²°ì •, í—Œë²• ì œì •, ë²•ë¥ ì•ˆ ë°œì˜', connection: 'ë…ì¬ê°€ ì•„ë‹Œ ë¯¼ì£¼ì  ì˜ì‚¬ê²°ì • êµ¬ì¡° ì„¤ê³„', tags: ['#ì •ì¹˜', '#ì‚¬íšŒ', '#ë¦¬ë”ì‹­'] },
            { id: 'economy_planning', name: 'ê²½ì œê¸°íšë¶€', icon: 'ğŸ’¹', color: 'green-500', category: 'í•µì‹¬', description: 'ê²½ì œ ì‹œìŠ¤í…œì„ ì„¤ê³„í•˜ê³  êµ­ê°€ì˜ ì˜ˆì‚°ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.', activity: 'í™”í ë°œí–‰, ì„¸ê¸ˆ ì •ì±… ìˆ˜ë¦½, ì‚°ì—… ìœ¡ì„±', connection: 'íšì¼í™”ëœ ì†Œë¹„ ì‚¬íšŒë¥¼ ë„˜ì–´ì„  ëŒ€ì•ˆ ê²½ì œ ëª¨ìƒ‰', tags: ['#ê²½ì œ', '#ê²½ì˜', '#ê¸ˆìœµ'] },
            { id: 'education_welfare', name: 'êµìœ¡ë³µì§€ë¶€', icon: 'â¤ï¸', color: 'red-500', category: 'í•µì‹¬', description: 'êµ­ë¯¼ì˜ ì„±ì¥ê³¼ í–‰ë³µ, ê±´ê°•í•œ ì‚¶ì„ ì±…ì„ì§‘ë‹ˆë‹¤.', activity: 'ë¯¸ë˜ êµìœ¡ ê³¼ì • ì„¤ê³„, ë³µì§€ ì œë„ êµ¬ì¶•', connection: "'ì†Œë§ˆ'ì™€ ì¡°ê±´í™” êµìœ¡ì„ ëŒ€ì²´í•  ì¸ê°„ì ì¸ ëŒ€ì•ˆ ì œì‹œ", tags: ['#êµìœ¡', '#ë³µì§€', '#ì‹¬ë¦¬'] },
            { id: 'justice', name: 'ë²•ë¬´ë¶€', icon: 'âš–ï¸', color: 'purple-500', category: 'íŠ¹í™”', description: 'ì •ì˜ë¥¼ ì‹¤í˜„í•˜ê³  ì‚¬íšŒ ì§ˆì„œë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.', activity: 'ì¬íŒ ì œë„ ì„¤ê³„, êµì • ì‹œì„¤ ìš´ì˜ ë°©ì•ˆ êµ¬ìƒ', career: 'íŒì‚¬, ê²€ì‚¬, ë³€í˜¸ì‚¬, ê²½ì°°' },
            { id: 'science_tech', name: 'ê³¼í•™ê¸°ìˆ ë¶€', icon: 'ğŸ”¬', color: 'yellow-500', category: 'íŠ¹í™”', description: 'ë¯¸ë˜ ê¸°ìˆ ì„ ì—°êµ¬í•˜ê³  ìœ¤ë¦¬ ê¸°ì¤€ì„ ë§Œë“­ë‹ˆë‹¤.', activity: 'AI ìœ¤ë¦¬ ê°•ë ¹ ì œì •, ìš°ì£¼ íƒì‚¬ ê³„íš ìˆ˜ë¦½', career: 'ê³¼í•™ì, ì—°êµ¬ì›, IT ê°œë°œì' },
            { id: 'culture_arts', name: 'ë¬¸í™”ì˜ˆìˆ ë¶€', icon: 'ğŸ¨', color: 'pink-500', category: 'íŠ¹í™”', description: 'êµ­ë¯¼ì˜ ì‚¶ì„ í’ìš”ë¡­ê²Œ í•˜ëŠ” ë¬¸í™”ë¥¼ ë§Œë“­ë‹ˆë‹¤.', activity: 'êµ­ê°€(åœ‹æ­Œ) ì œì‘, êµ­ë¦½ ë°•ë¬¼ê´€/ë¯¸ìˆ ê´€ ê¸°íš', career: 'ì˜ˆìˆ ê°€, íë ˆì´í„°, ì½˜í…ì¸  ì œì‘ì' },
            { id: 'foreign_affairs', name: 'ì™¸êµë¶€', icon: 'ğŸŒ', color: 'indigo-500', category: 'íŠ¹í™”', description: 'ë‹¤ë¥¸ êµ­ê°€(í•™ê¸‰)ì™€ ìš°í˜¸ì ì¸ ê´€ê³„ë¥¼ ë§ºìŠµë‹ˆë‹¤.', activity: 'ëª¨ì˜ UN ì´íšŒ ì¤€ë¹„, êµ­ê°€ê°„ êµë¥˜ í˜‘ì • ì²´ê²°', career: 'ì™¸êµê´€, êµ­ì œê¸°êµ¬ ì¢…ì‚¬ì' },
            { id: 'environment_energy', name: 'í™˜ê²½ì—ë„ˆì§€ë¶€', icon: 'ğŸŒ³', color: 'green-600', category: 'íŠ¹í™”', description: 'ìì—°ê³¼ ê³µì¡´í•˜ë©° ì§€ì†ê°€ëŠ¥í•œ ë°œì „ì„ ì´ë£¹ë‹ˆë‹¤.', activity: 'ì¹œí™˜ê²½ ì—ë„ˆì§€ ì •ì±… ìˆ˜ë¦½, êµ­ë¦½ê³µì› ì§€ì •', career: 'í™˜ê²½ê³µí•™ì, ì—ë„ˆì§€ ì „ë¬¸ê°€' },
            { id: 'land_transport', name: 'êµ­í† êµí†µë¶€', icon: 'ğŸ™ï¸', color: 'gray-600', category: 'íŠ¹í™”', description: 'ì‚´ê¸° ì¢‹ì€ ë„ì‹œì™€ í¸ë¦¬í•œ êµí†µë§ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.', activity: 'ë¯¸ë˜ ë„ì‹œ ì„¤ê³„, ìŠ¤ë§ˆíŠ¸ êµí†µ ì‹œìŠ¤í…œ êµ¬ìƒ', career: 'ë„ì‹œê³„íšê°€, ê±´ì¶•ê°€, êµí†µê³µí•™ì' },
            { id: 'sme_ventures', name: 'ì¤‘ì†Œë²¤ì²˜ê¸°ì—…ë¶€', icon: 'ğŸ’¡', color: 'cyan-500', category: 'íŠ¹í™”', description: 'ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ê°€ ë¹„ì¦ˆë‹ˆìŠ¤ê°€ ë˜ë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.', activity: 'ìŠ¤íƒ€íŠ¸ì—… ì§€ì› ì •ì±… êµ¬ìƒ, ì°½ì—… ê²½ì§„ëŒ€íšŒ ê¸°íš', career: 'CEO, ë²¤ì²˜ íˆ¬ìì, ê²½ì˜ ì»¨ì„¤í„´íŠ¸' },
            { id: 'public_relations', name: 'í™ë³´ì²˜', icon: 'ğŸ“¢', color: 'orange-500', category: 'íŠ¹í™”', description: 'ìš°ë¦¬ êµ­ê°€ì˜ ë§¤ë ¥ì„ ë„ë¦¬ ì•Œë¦¬ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.', activity: 'êµ­ê°€ í™ë³´ ì˜ìƒ/í¬ìŠ¤í„° ì œì‘, êµ­ì • ë¸Œë¦¬í•‘', career: 'ì–¸ë¡ ì¸, ì•„ë‚˜ìš´ì„œ, ê´‘ê³  ì „ë¬¸ê°€' }
        ];
        
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : { apiKey: "...", authDomain: "...", projectId: "..." };
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-brave-new-world-app';
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        async function setupApp() {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Authentication failed:", error);
            }

            const grid = document.getElementById('department-grid');
            const collectionPath = `/artifacts/${appId}/public/data/departments`;

            departments.forEach(dept => {
                const docRef = doc(db, collectionPath, dept.id);

                // Create card HTML
                const card = document.createElement('div');
                card.className = `department-card bg-white rounded-xl shadow-md p-6 border-t-4 border-${dept.color}`;
                card.innerHTML = `
                    <div class="card-content">
                        <div class="text-5xl mb-4">${dept.icon}</div>
                        <h3 class="text-2xl font-bold mb-2">${dept.name}</h3>
                        <p class="text-gray-600 mb-4 text-sm">${dept.description}</p>
                        <div class="text-sm space-y-2 mb-4">
                            <p><strong class="text-gray-700">ì£¼ìš” í™œë™:</strong> ${dept.activity}</p>
                            ${dept.category === 'í•µì‹¬' ? `<p><strong class="text-gray-700">ì—°ê²°ì :</strong> ${dept.connection}</p>` : ''}
                            ${dept.category === 'íŠ¹í™”' ? `<p><strong class="text-gray-700">ê´€ë ¨ ì§„ë¡œ:</strong> ${dept.career}</p>` : ''}
                        </div>
                        ${dept.tags ? `<div class="text-xs mb-4">${dept.tags.map(tag => `<span class="bg-gray-200 rounded-full px-3 py-1 font-semibold mr-1">${tag}</span>`).join('')}</div>` : ''}
                    </div>
                    <div class="mt-auto">
                        <div class="bg-gray-50 p-3 rounded-lg mt-4">
                            <h4 class="font-bold text-sm mb-2">ê°€ì…í•œ í•™ìƒ ëª…ë‹¨</h4>
                            <ul id="members-${dept.id}" class="member-list text-sm text-gray-700 space-y-1">
                                <li class="text-gray-400">ì•„ì§ ê°€ì…í•œ í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.</li>
                            </ul>
                        </div>
                        <form id="form-${dept.id}" class="mt-4 flex gap-2">
                            <input type="text" placeholder="ì´ë¦„ ì…ë ¥" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-${dept.color}" required>
                            <button type="submit" class="bg-${dept.color} text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition">ê°€ì…í•˜ê¸°</button>
                        </form>
                    </div>
                `;
                grid.appendChild(card);
                
                // Firestore listener
                onSnapshot(docRef, (docSnap) => {
                    const memberListEl = document.getElementById(`members-${dept.id}`);
                    memberListEl.innerHTML = '';
                    if (docSnap.exists() && docSnap.data().members && docSnap.data().members.length > 0) {
                        docSnap.data().members.forEach(member => {
                            const li = document.createElement('li');
                            li.textContent = member;
                            li.className = "bg-white px-2 py-1 rounded shadow-sm";
                            memberListEl.appendChild(li);
                        });
                    } else {
                        memberListEl.innerHTML = '<li class="text-gray-400">ì•„ì§ ê°€ì…í•œ í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.</li>';
                    }
                });

                // Form submission
                const form = document.getElementById(`form-${dept.id}`);
                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const input = form.querySelector('input');
                    const studentName = input.value.trim();
                    if (studentName) {
                        try {
                            const docSnap = await getDoc(docRef);
                            if (!docSnap.exists()) {
                                await setDoc(docRef, { members: [studentName] });
                            } else {
                                await updateDoc(docRef, {
                                    members: arrayUnion(studentName)
                                });
                            }
                            input.value = '';
                        } catch (error) {
                            console.error("Error adding student: ", error);
                            alert("ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                        }
                    }
                });
            });
        }

        setupApp();
    </script>
</body>
</html>

